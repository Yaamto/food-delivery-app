{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bilal\\\\Documents\\\\food-delivery-app\\\\client\\\\src\\\\components\\\\protectedRoute\\\\ProtectedRoutes.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProtectedRoutes = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [isAuth, setIsAuth] = useState(false);\n  useEffect(() => {\n    async function getAuth() {\n      try {\n        const res = await fetch('http://localhost:3000/jwtid', {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include'\n        });\n        const data = await res.json();\n        console.log(data);\n\n        if (data.user._id) {\n          setIsAuth(true);\n          localStorage.setItem(\"userId\", data.user._id);\n          console.log(isAuth);\n        } else {\n          setIsAuth(false);\n        }\n      } catch (err) {\n        setIsAuth(false);\n        console.log(err);\n      }\n\n      console.log(isAuth);\n    }\n\n    getAuth();\n  }, []);\n  console.log(isAuth);\n  return isAuth ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 30\n  }, this);\n};\n\n_s(ProtectedRoutes, \"t4PKgZRiujzx2FYwcAdbmygk8hU=\");\n\n_c = ProtectedRoutes;\nexport default ProtectedRoutes;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProtectedRoutes\");","map":{"version":3,"sources":["C:/Users/bilal/Documents/food-delivery-app/client/src/components/protectedRoute/ProtectedRoutes.js"],"names":["useEffect","useState","Navigate","ProtectedRoutes","children","isAuth","setIsAuth","getAuth","res","fetch","headers","credentials","data","json","console","log","user","_id","localStorage","setItem","err"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,kBAAzB;;;AAGA,MAAMC,eAAe,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AAEtC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBL,QAAQ,CAAC,KAAD,CAApC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeO,OAAf,GAAyB;AACrB,UAAI;AAEA,cAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAAgC;AACnDC,UAAAA,OAAO,EAAE;AACL,4BAAgB;AADX,WAD0C;AAInDC,UAAAA,WAAW,EAAE;AAJsC,SAAhC,CAAvB;AAMA,cAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAAnB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AACA,YAAIA,IAAI,CAACI,IAAL,CAAUC,GAAd,EAAmB;AACfX,UAAAA,SAAS,CAAC,IAAD,CAAT;AACAY,UAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BP,IAAI,CAACI,IAAL,CAAUC,GAAzC;AACAH,UAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AACH,SAJD,MAIO;AACHC,UAAAA,SAAS,CAAC,KAAD,CAAT;AAEH;AACJ,OAlBD,CAkBC,OAAMc,GAAN,EAAU;AACPd,QAAAA,SAAS,CAAC,KAAD,CAAT;AACAQ,QAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACH;;AACDN,MAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AACH;;AAEDE,IAAAA,OAAO;AACR,GA5BQ,EA4BN,EA5BM,CAAT;AA6BAO,EAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AACA,SAAOA,MAAM,GAAGD,QAAH,gBAAc,QAAC,QAAD;AAAU,IAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,UAA3B;AAED,CApCD;;GAAMD,e;;KAAAA,e;AAsCN,eAAeA,eAAf","sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { Navigate } from \"react-router-dom\"\r\n\r\n\r\nconst ProtectedRoutes = ({children}) => {\r\n\r\n  const [isAuth, setIsAuth] = useState(false)\r\n\r\n  useEffect(() => {\r\n    async function getAuth() {\r\n        try {\r\n\r\n            const res = await fetch('http://localhost:3000/jwtid', {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                credentials: 'include'\r\n            })\r\n            const data = await res.json()\r\n            console.log(data)\r\n            if (data.user._id) {\r\n                setIsAuth(true)\r\n                localStorage.setItem(\"userId\", data.user._id )\r\n                console.log(isAuth)\r\n            } else {\r\n                setIsAuth(false)\r\n                \r\n            }\r\n        }catch(err){\r\n            setIsAuth(false)\r\n            console.log(err)\r\n        }\r\n        console.log(isAuth)\r\n    }\r\n\r\n    getAuth()\r\n  }, [])\r\n  console.log(isAuth)\r\n  return isAuth ? children : <Navigate to='/login' />\r\n\r\n}\r\n\r\nexport default ProtectedRoutes"]},"metadata":{},"sourceType":"module"}