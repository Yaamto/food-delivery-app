{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\bilal\\\\Documents\\\\food-delivery-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import{NavLink,useNavigate}from'react-router-dom';import axios from\"axios\";import\"./navbar.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Navbar(_ref){var cart=_ref.cart,setCart=_ref.setCart,setTotalPrice=_ref.setTotalPrice;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),admin=_useState6[0],setAdmin=_useState6[1];useEffect(function(){function getAuth(){return _getAuth.apply(this,arguments);}function _getAuth(){_getAuth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:3000/jwtid',{headers:{'Content-Type':'application/json'},credentials:'include'});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;console.log(data);if(data.user._id&&data.user.isAdmin===true){setAdmin(true);}else{setAdmin(false);}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setAdmin(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _getAuth.apply(this,arguments);}getAuth();},[]);var navigate=useNavigate();var getLogin=function getLogin(){navigate(\"/login\");};var handleLogout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();axios({method:\"post\",url:\"\".concat(process.env.REACT_APP_API_URL,\"user/logout\"),withCredentials:true,headers:{'Access-Control-Allow-Credentials':true}}).then(function(res){localStorage.removeItem(\"userId\");localStorage.removeItem(\"userInfo\");navigate(\"/login\");setUser(null);}).catch(function(err){console.log(err);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLogout(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){var userId=localStorage.getItem(\"userId\");var user=localStorage.getItem(\"userInfo\");setUser(user);setUserId(userId);},[]);var hideUl=function hideUl(){document.getElementById(\"burger\").checked=false;};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"logo\",children:[/*#__PURE__*/_jsx(NavLink,{exact:true,to:\"/\",children:\"FOODIES\"}),\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"burger\",id:\"burger\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"navList\",children:[/*#__PURE__*/_jsxs(\"li\",{onClick:hideUl,children:[/*#__PURE__*/_jsx(\"a\",{href:\"#service\",children:\"Service\"}),\" \"]}),/*#__PURE__*/_jsx(\"li\",{onClick:hideUl,children:/*#__PURE__*/_jsx(\"a\",{href:\"#menu\",children:\"Menu\"})}),/*#__PURE__*/_jsx(\"li\",{onClick:hideUl,children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Contact\"})}),userId===null?\"\":/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{exact:true,to:\"/orders\",children:\"My orders\"})}),admin===true?/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{exact:true,to:\"/admin/products\",children:\"Admin\"})}):\"\",userId===null?/*#__PURE__*/_jsx(\"button\",{className:\"logout\",onClick:getLogin,children:\"Login\"}):/*#__PURE__*/_jsx(\"button\",{className:\"logout\",onClick:function onClick(e){return handleLogout(e);},children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"label\",{for:\"burger\",className:\"burger\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"item-nav\"}),/*#__PURE__*/_jsx(\"div\",{class:\"item-nav\"}),/*#__PURE__*/_jsx(\"div\",{class:\"item-nav\"})]})]})});}","map":{"version":3,"sources":["C:/Users/bilal/Documents/food-delivery-app/client/src/components/navbar/Navbar.js"],"names":["React","useEffect","useState","NavLink","useNavigate","axios","Navbar","cart","setCart","setTotalPrice","userId","setUserId","user","setUser","admin","setAdmin","getAuth","fetch","headers","credentials","res","json","data","console","log","_id","isAdmin","navigate","getLogin","handleLogout","e","preventDefault","method","url","process","env","REACT_APP_API_URL","withCredentials","then","localStorage","removeItem","catch","err","getItem","hideUl","document","getElementById","checked"],"mappings":"kaAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,CAAkBC,WAAlB,KAAqC,kBAArC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,cAAP,C,6IACA,cAAe,SAASC,CAAAA,MAAT,MAAgD,IAA/BC,CAAAA,IAA+B,MAA/BA,IAA+B,CAAzBC,OAAyB,MAAzBA,OAAyB,CAAhBC,aAAgB,MAAhBA,aAAgB,CAE3D,cAA4BP,QAAQ,CAAC,IAAD,CAApC,wCAAOQ,MAAP,eAAeC,SAAf,eACA,eAAwBT,QAAQ,CAAC,EAAD,CAAhC,yCAAOU,IAAP,eAAaC,OAAb,eACA,eAA0BX,QAAQ,CAAC,KAAD,CAAlC,yCAAOY,KAAP,eAAcC,QAAd,eAEAd,SAAS,CAAC,UAAM,SACCe,CAAAA,OADD,+HACd,sLAG0BC,CAAAA,KAAK,CAAC,6BAAD,CAAgC,CACnDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAD0C,CAInDC,WAAW,CAAE,SAJsC,CAAhC,CAH/B,QAGcC,GAHd,qCAS2BA,CAAAA,GAAG,CAACC,IAAJ,EAT3B,QAScC,IATd,eAUQC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAIA,IAAI,CAACV,IAAL,CAAUa,GAAV,EAAiBH,IAAI,CAACV,IAAL,CAAUc,OAAV,GAAoB,IAAzC,CAA+C,CAC7CX,QAAQ,CAAC,IAAD,CAAR,CAED,CAHD,IAGM,CACJA,QAAQ,CAAC,KAAD,CAAR,CACD,CAhBT,iFAkBOA,QAAQ,CAAC,KAAD,CAAR,CAlBP,qEADc,0CAwBdC,OAAO,GACR,CAzBQ,CAyBN,EAzBM,CAAT,CA2BA,GAAMW,CAAAA,QAAQ,CAAGvB,WAAW,EAA5B,CACA,GAAMwB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnBD,QAAQ,CAAC,QAAD,CAAR,CACH,CAFD,CAIA,GAAME,CAAAA,YAAY,2FAAG,kBAAMC,CAAN,sHACnBA,CAAC,CAACC,cAAF,GACA1B,KAAK,CAAC,CACJ2B,MAAM,CAAC,MADH,CAEJC,GAAG,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,eAFC,CAGJC,eAAe,CAAC,IAHZ,CAIJnB,OAAO,CAAG,CACN,mCAAqC,IAD/B,CAJN,CAAD,CAAL,CAWDoB,IAXC,CAWI,SAAClB,GAAD,CAAS,CACbmB,YAAY,CAACC,UAAb,CAAwB,QAAxB,EACAD,YAAY,CAACC,UAAb,CAAwB,UAAxB,EAGAb,QAAQ,CAAC,QAAD,CAAR,CACAd,OAAO,CAAC,IAAD,CAAP,CAID,CArBC,EAuBD4B,KAvBC,CAuBK,SAACC,GAAD,CAAS,CACZnB,OAAO,CAACC,GAAR,CAAYkB,GAAZ,EACH,CAzBC,EAFmB,wDAAH,kBAAZb,CAAAA,YAAY,6CAAlB,CAgCA5B,SAAS,CAAC,UAAK,CACZ,GAAIS,CAAAA,MAAM,CAAG6B,YAAY,CAACI,OAAb,CAAqB,QAArB,CAAb,CACA,GAAI/B,CAAAA,IAAI,CAAG2B,YAAY,CAACI,OAAb,CAAqB,UAArB,CAAX,CACA9B,OAAO,CAACD,IAAD,CAAP,CACCD,SAAS,CAACD,MAAD,CAAT,CACH,CALQ,CAKN,EALM,CAAT,CASA,GAAMkC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAK,CAElBC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,OAAlC,CAA4C,KAA5C,CAED,CAJD,CAUF,mBACE,sCACA,aAAK,SAAS,CAAC,KAAf,wBACG,WAAG,SAAS,CAAC,MAAb,wBAAoB,KAAC,OAAD,EAAS,KAAK,KAAd,CAAe,EAAE,CAAC,GAAlB,qBAApB,OADH,cAGG,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,QAA5B,CAAqC,EAAE,CAAC,QAAxC,EAHH,cAIO,YAAI,SAAS,CAAC,SAAd,wBACI,YAAI,OAAO,CAAEH,MAAb,wBAAqB,UAAG,IAAI,CAAC,UAAR,qBAArB,OADJ,cAEI,WAAI,OAAO,CAAEA,MAAb,uBAAqB,UAAG,IAAI,CAAC,OAAR,kBAArB,EAFJ,cAGI,WAAI,OAAO,CAAEA,MAAb,uBAAqB,UAAG,IAAI,CAAC,GAAR,qBAArB,EAHJ,CAIGlC,MAAM,GAAK,IAAX,CAAkB,EAAlB,cAAwB,iCAAI,KAAC,OAAD,EAAS,KAAK,KAAd,CAAe,EAAE,CAAC,SAAlB,uBAAJ,EAJ3B,CAKGI,KAAK,GAAK,IAAV,cAAkB,iCAAI,KAAC,OAAD,EAAS,KAAK,KAAd,CAAe,EAAE,CAAC,iBAAlB,mBAAJ,EAAlB,CAAiF,EALpF,CAMGJ,MAAM,GAAK,IAAX,cAAoB,eAAS,SAAS,CAAC,QAAnB,CAA4B,OAAO,CAAEkB,QAArC,mBAApB,cAAsF,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAE,iBAACE,CAAD,QAAOD,CAAAA,YAAY,CAACC,CAAD,CAAnB,EAApC,oBANzF,GAJP,cAYO,eAAO,GAAG,CAAC,QAAX,CAAoB,SAAS,CAAC,QAA9B,wBACH,YAAK,KAAK,CAAC,UAAX,EADG,cAEH,YAAK,KAAK,CAAC,UAAX,EAFG,cAGH,YAAK,KAAK,CAAC,UAAX,EAHG,GAZP,GADA,EADF,CA6BD","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { NavLink, useNavigate } from 'react-router-dom'\r\nimport axios from \"axios\"\r\nimport \"./navbar.css\"\r\nexport default function Navbar({cart, setCart, setTotalPrice}) {\r\n\r\n    const [userId, setUserId] = useState(null)\r\n    const [user, setUser] = useState([])\r\n    const [admin, setAdmin] = useState(false)\r\n  \r\n    useEffect(() => {\r\n      async function getAuth() {\r\n          try {\r\n  \r\n              const res = await fetch('http://localhost:3000/jwtid', {\r\n                  headers: {\r\n                      'Content-Type': 'application/json'\r\n                  },\r\n                  credentials: 'include'\r\n              })\r\n              const data = await res.json()\r\n              console.log(data)\r\n              if (data.user._id && data.user.isAdmin===true) {\r\n                setAdmin(true)\r\n                  \r\n              }else {\r\n                setAdmin(false)\r\n              }\r\n          }catch(err){\r\n             setAdmin(false)\r\n            \r\n      }\r\n    }\r\n  \r\n      getAuth()\r\n    }, [])\r\n   \r\n    const navigate = useNavigate()\r\n    const getLogin = () => {\r\n        navigate(\"/login\")\r\n    }\r\n\r\n    const handleLogout = async(e) => {\r\n      e.preventDefault()\r\n      axios({\r\n        method:\"post\",\r\n        url:`${process.env.REACT_APP_API_URL}user/logout`,\r\n        withCredentials:true,\r\n        headers : {\r\n            'Access-Control-Allow-Credentials' : true,\r\n           \r\n            \r\n        }\r\n        \r\n    })\r\n    .then((res) => {\r\n      localStorage.removeItem(\"userId\")\r\n      localStorage.removeItem(\"userInfo\")\r\n      \r\n     \r\n      navigate(\"/login\")\r\n      setUser(null)\r\n      \r\n        \r\n       \r\n    })\r\n\r\n    .catch((err) => {\r\n        console.log(err)\r\n    })\r\n\r\n\r\n    }\r\n\r\n    useEffect(()=> {\r\n       let userId = localStorage.getItem(\"userId\")\r\n       let user = localStorage.getItem(\"userInfo\")\r\n       setUser(user)\r\n        setUserId(userId)\r\n    }, [])\r\n\r\n\r\n\r\n    const hideUl = () =>{\r\n      \r\n      document.getElementById(\"burger\").checked = false\r\n     \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n    <div className=\"nav\">\r\n       <p className='logo'><NavLink exact to=\"/\">FOODIES</NavLink> </p>\r\n      \r\n       <input type=\"checkbox\" name=\"burger\" id=\"burger\"/>\r\n           <ul className='navList'>\r\n               <li onClick={hideUl}><a href=\"#service\">Service</a> </li>\r\n               <li onClick={hideUl}><a href=\"#menu\">Menu</a></li>\r\n               <li onClick={hideUl}><a href=\"#\">Contact</a></li>\r\n             {userId === null ? \"\" : (<li><NavLink exact to=\"/orders\">My orders</NavLink></li>)}  \r\n             {admin === true ? (<li><NavLink exact to=\"/admin/products\">Admin</NavLink></li>): \"\"}\r\n             {userId === null ? ( <button  className='logout' onClick={getLogin}>Login</button>): ( <button className='logout' onClick={(e) => handleLogout(e)}>Logout</button>)}\r\n           </ul>\r\n           <label for=\"burger\" className='burger'>\r\n        <div class=\"item-nav\"></div>\r\n        <div class=\"item-nav\"></div>\r\n        <div class=\"item-nav\"></div>\r\n       </label>\r\n    \r\n   \r\n\r\n      \r\n      \r\n    </div>\r\n    \r\n    \r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}