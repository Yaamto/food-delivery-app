{"ast":null,"code":"import _slicedToArray from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import\"./login.css\";import axios from\"axios\";import{useNavigate}from'react-router-dom';import BackToSite from'./BackToSite';import{StatusContext}from'../../components/context/StatusContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var socket;var host=process.env.REACT_APP_API_URL;export default function Login(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),_userId=_useState6[0],set_userId=_useState6[1];var _useContext=useContext(StatusContext),sock=_useContext.sock,userId=_useContext.userId;var navigate=useNavigate();useEffect(function(){if(_userId){sock.emit(\"join-order\",_userId);}},[sock,_userId]);var handleLogin=function handleLogin(e){e.preventDefault();axios({method:\"post\",url:\"\".concat(process.env.REACT_APP_API_URL,\"user/login\"),withCredentials:true,data:{email:email,password:password},headers:{'Access-Control-Allow-Credentials':true}}).then(function(res){console.log(res.data.user);set_userId(res.data.user._id);userId=res.data.user._id;localStorage.setItem(\"userId\",res.data.user._id);localStorage.setItem(\"userInfo\",JSON.stringify(res.data.user));navigate(\"/\");console.log(res);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BackToSite,{}),/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title-auth\",children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",id:\"email\",placeholder:\"Email...\",onChange:function onChange(e){return setEmail(e.target.value);},value:email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",placeholder:\"Password...\",onChange:function onChange(e){return setPassword(e.target.value);},value:password}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account ? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return navigate(\"/register\");},children:\" Create it !\"})]})]})})]});}","map":{"version":3,"sources":["C:/Users/bilal/Documents/food-delivery-app/client/src/pages/authenticate/Login.js"],"names":["React","useContext","useEffect","useState","axios","useNavigate","BackToSite","StatusContext","socket","host","process","env","REACT_APP_API_URL","Login","email","setEmail","password","setPassword","_userId","set_userId","sock","userId","navigate","emit","handleLogin","e","preventDefault","method","url","withCredentials","data","headers","then","res","console","log","user","_id","localStorage","setItem","JSON","stringify","catch","err","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport \"./login.css\"\r\nimport axios from \"axios\"\r\nimport { useNavigate } from 'react-router-dom'\r\nimport BackToSite from './BackToSite'\r\nimport { StatusContext } from '../../components/context/StatusContext'\r\n\r\nlet socket \r\nconst host = process.env.REACT_APP_API_URL\r\n\r\nexport default function Login() {\r\n\r\n  const [email, setEmail] = useState()\r\n  const [password, setPassword] = useState()\r\n  const [_userId, set_userId] = useState()\r\n\r\n  let {sock, userId} = useContext(StatusContext)\r\n\r\n  const navigate = useNavigate()\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (_userId) {\r\n      sock.emit(\"join-order\", _userId);\r\n    }\r\n  }, [sock, _userId]);\r\n\r\n\r\n  const handleLogin = (e) => {\r\n       \r\n    e.preventDefault()\r\n    axios({\r\n        method:\"post\",\r\n        url:`${process.env.REACT_APP_API_URL}user/login`,\r\n        withCredentials:true,\r\n        data: {\r\n            email: email,\r\n            password: password\r\n        },\r\n        headers : {\r\n            'Access-Control-Allow-Credentials' : true,\r\n           \r\n            \r\n        }\r\n        \r\n    })\r\n    .then((res) => {\r\n      console.log(res.data.user)\r\n      set_userId(res.data.user._id)\r\n      userId = res.data.user._id\r\n      localStorage.setItem(\"userId\", res.data.user._id)\r\n      localStorage.setItem(\"userInfo\", JSON.stringify(res.data.user))\r\n      navigate(\"/\")\r\n        console.log(res)\r\n       \r\n    })\r\n\r\n    .catch((err) => {\r\n        console.log(err)\r\n    })\r\n\r\n}\r\n\r\n\r\n  return (\r\n    <>\r\n    <BackToSite />\r\n      <div className=\"login-page\">\r\n\r\n          <form className='login-form' onSubmit={handleLogin}>\r\n              <h1 className=\"title-auth\">Login</h1>\r\n              <input type=\"text\" name='email' id='email' placeholder='Email...' onChange={(e) => setEmail(e.target.value)} value={email}/>\r\n              <input type=\"password\" name='password' id='password' placeholder='Password...'onChange={(e) => setPassword(e.target.value)} value={password}/>\r\n              <button type='submit'>Login</button>\r\n              <p>Don't have an account ? <span onClick={() => navigate(\"/register\")}> Create it !</span></p>\r\n          </form>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}