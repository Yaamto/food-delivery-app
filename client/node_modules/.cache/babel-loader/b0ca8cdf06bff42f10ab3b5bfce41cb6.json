{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bilal\\\\Documents\\\\food-delivery-app\\\\client\\\\src\\\\components\\\\protectedRoute\\\\ProtectedRoutes.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProtectedRoutes = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [isAuth, setIsAuth] = useState(true);\n  useEffect(() => {\n    async function getAuth() {\n      const res = await fetch('http://localhost:3000/jwtid', {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      const data = await res.json();\n\n      if (data.user._id) {\n        setIsAuth(true);\n        localStorage.setItem(\"userId\", data.user._id);\n        localStorage.setItem(\"userInfo\", data.user);\n      } else {\n        setIsAuth(false);\n      }\n    }\n\n    getAuth();\n  }, []);\n  return isAuth ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 30\n  }, this);\n};\n\n_s(ProtectedRoutes, \"/i/wAOlltoEkdfK2JDLmZnpCTDE=\");\n\n_c = ProtectedRoutes;\nexport default ProtectedRoutes;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProtectedRoutes\");","map":{"version":3,"sources":["C:/Users/bilal/Documents/food-delivery-app/client/src/components/protectedRoute/ProtectedRoutes.js"],"names":["useEffect","useState","Navigate","ProtectedRoutes","children","isAuth","setIsAuth","getAuth","res","fetch","headers","credentials","data","json","user","_id","localStorage","setItem"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,kBAAzB;;;AAGA,MAAMC,eAAe,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AAEtC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBL,QAAQ,CAAC,IAAD,CAApC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeO,OAAf,GAAyB;AACvB,YAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAAgC;AACrDC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAD4C;AAIrDC,QAAAA,WAAW,EAAE;AAJwC,OAAhC,CAAvB;AAMA,YAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAAnB;;AAEA,UAAID,IAAI,CAACE,IAAL,CAAUC,GAAd,EAAmB;AACjBT,QAAAA,SAAS,CAAC,IAAD,CAAT;AACAU,QAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BL,IAAI,CAACE,IAAL,CAAUC,GAAzC;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCL,IAAI,CAACE,IAAtC;AACD,OAJD,MAIO;AACLR,QAAAA,SAAS,CAAC,KAAD,CAAT;AAED;AAEF;;AAEDC,IAAAA,OAAO;AACR,GAtBQ,EAsBN,EAtBM,CAAT;AAwBA,SAAOF,MAAM,GAAGD,QAAH,gBAAc,QAAC,QAAD;AAAU,IAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,UAA3B;AAED,CA9BD;;GAAMD,e;;KAAAA,e;AAgCN,eAAeA,eAAf","sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { Navigate } from \"react-router-dom\"\r\n\r\n\r\nconst ProtectedRoutes = ({children}) => {\r\n\r\n  const [isAuth, setIsAuth] = useState(true)\r\n\r\n  useEffect(() => {\r\n    async function getAuth() {\r\n      const res = await fetch('http://localhost:3000/jwtid', {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        credentials: 'include'\r\n      })\r\n      const data = await res.json()\r\n      \r\n      if (data.user._id) {\r\n        setIsAuth(true)\r\n        localStorage.setItem(\"userId\", data.user._id )\r\n        localStorage.setItem(\"userInfo\", data.user)\r\n      } else {\r\n        setIsAuth(false)\r\n       \r\n      }\r\n    \r\n    }\r\n\r\n    getAuth()\r\n  }, [])\r\n\r\n  return isAuth ? children : <Navigate to='/' />\r\n\r\n}\r\n\r\nexport default ProtectedRoutes"]},"metadata":{},"sourceType":"module"}