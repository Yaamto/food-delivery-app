{"ast":null,"code":"import _toConsumableArray from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\bilal\\\\Documents\\\\food-delivery-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import ModalEditFood from'../../../components/modal/ModalEditFood';import SideBar from'../../../components/sidebar/SideBar';import LoadingSpinner from'../../../components/spinner/Spinner';import AddProductModal from'./AddProductModal';import{Notyf}from'notyf';import\"./products.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Products(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allFood=_useState2[0],setAllFood=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),categories=_useState6[0],setCategories=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showEdit=_useState10[0],setShowEdit=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),singleFood=_useState12[0],setSingleFood=_useState12[1];var navigate=useNavigate();useEffect(function(){var getFood=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({method:\"get\",url:\"\".concat(process.env.REACT_APP_API_URL,\"food/allfood\")}).then(function(res){console.log(res.data.data);setAllFood(res.data.data);setTimeout(function(){setLoading(true);},300);}).catch(function(err){console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getFood(){return _ref.apply(this,arguments);};}();getFood();},[]);useEffect(function(){axios({method:\"get\",url:\"\".concat(process.env.REACT_APP_API_URL,\"category/allcategory\")}).then(function(res){console.log(res.data.data);setCategories(res.data.data);}).catch(function(err){console.log(err);});},[]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,i){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(false);_context2.next=3;return axios({method:\"delete\",url:\"\".concat(process.env.REACT_APP_API_URL,\"food/delete/\")+id,withCredentials:true,headers:{'Access-Control-Allow-Credentials':true}}).then(function(res){console.log(res);if(res.data.msg){localStorage.removeItem(\"userInfo\");localStorage.removeItem(\"userId\");navigate('/');}else{setTimeout(function(){setLoading(true);},200);var notyf=new Notyf({duration:2000,position:{x:'center',y:'top'}});notyf.success('Product deleted with success');var newFood=_toConsumableArray(allFood);newFood.splice(i,1);setAllFood(newFood);}}).catch(function(err){console.log(err);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x,_x2){return _ref2.apply(this,arguments);};}();if(loading===false){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsx(\"button\",{className:\"add-product\",onClick:function onClick(){return setShow(true);},children:\"Add product\"}),/*#__PURE__*/_jsx(\"div\",{className:\"all-food\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]}),allFood.map(function(food,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:food.name}),/*#__PURE__*/_jsx(\"td\",{children:food.description}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",food.price]}),/*#__PURE__*/_jsx(\"td\",{children:food.category.name}),/*#__PURE__*/_jsx(\"td\",{children:\"Image\"}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/images/pencil.png\",alt:\"edit\",height:\"35\",width:\"35\",onClick:function onClick(){setShowEdit(true);setSingleFood(food);}}),\" \",/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/images/remove.png\",alt:\"remove\",height:\"35\",width:\"35\",onClick:function onClick(){return handleDelete(food._id,i);}})]})]},i);})]})}),/*#__PURE__*/_jsx(AddProductModal,{categories:categories,show:show,onClose:function onClose(){return setShow(false);},allFood:allFood,setAllFood:setAllFood}),/*#__PURE__*/_jsx(ModalEditFood,{showEdit:showEdit,onClose:function onClose(){return setShowEdit(false);},categories:categories,singleFood:singleFood,setSingleFood:setSingleFood})]});}","map":{"version":3,"sources":["C:/Users/bilal/Documents/food-delivery-app/client/src/pages/admin/products/Products.js"],"names":["axios","React","useEffect","useState","useNavigate","ModalEditFood","SideBar","LoadingSpinner","AddProductModal","Notyf","Products","allFood","setAllFood","loading","setLoading","categories","setCategories","show","setShow","showEdit","setShowEdit","singleFood","setSingleFood","navigate","getFood","method","url","process","env","REACT_APP_API_URL","then","res","console","log","data","setTimeout","catch","err","handleDelete","id","i","withCredentials","headers","msg","localStorage","removeItem","notyf","duration","position","x","y","success","newFood","splice","map","food","name","description","price","category","PUBLIC_URL","_id"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport ModalEditFood from '../../../components/modal/ModalEditFood'\r\nimport SideBar from '../../../components/sidebar/SideBar'\r\nimport LoadingSpinner from '../../../components/spinner/Spinner'\r\nimport AddProductModal from './AddProductModal'\r\nimport { Notyf } from 'notyf';\r\nimport \"./products.css\"\r\nexport default function Products() {\r\n    const [allFood, setAllFood] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [categories, setCategories] = useState([])\r\n    const [show, setShow] = useState(false)\r\n    const [showEdit, setShowEdit] = useState(false)\r\n    const [singleFood, setSingleFood] = useState([])\r\n    const navigate = useNavigate()\r\n    \r\n    useEffect(() => {\r\n        const getFood = async() => {\r\n\r\n            await axios({\r\n                method:\"get\",\r\n                url:`${process.env.REACT_APP_API_URL}food/allfood`,\r\n                \r\n            })\r\n            .then((res) => {\r\n                console.log(res.data.data)\r\n                setAllFood(res.data.data)\r\n                setTimeout(() => {\r\n                    setLoading(true)\r\n                }, 300);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n        }\r\n        getFood()\r\n       }, [])\r\n\r\n       useEffect(() => {\r\n        axios({\r\n            method:\"get\",\r\n            url:`${process.env.REACT_APP_API_URL}category/allcategory`,\r\n    \r\n        })\r\n        .then((res) => {\r\n          console.log(res.data.data)\r\n          setCategories(res.data.data)\r\n          \r\n          \r\n            \r\n           \r\n        })\r\n    \r\n        .catch((err) => {\r\n            console.log(err)\r\n        })\r\n       }, [])\r\n\r\n\r\n       const handleDelete = async(id, i) => {\r\n           setLoading(false)\r\n        await axios({\r\n            method:\"delete\",\r\n            url:`${process.env.REACT_APP_API_URL}food/delete/`+ id,\r\n            withCredentials: true,\r\n            headers : {\r\n                'Access-Control-Allow-Credentials' : true,\r\n                \r\n               } \r\n    \r\n        })\r\n        .then((res) => {\r\n          console.log(res)\r\n          if(res.data.msg){\r\n              localStorage.removeItem(\"userInfo\")\r\n              localStorage.removeItem(\"userId\")\r\n              navigate('/')\r\n          }else {\r\n                setTimeout(() => {\r\n                    setLoading(true)\r\n                }, 200)\r\n                const notyf = new Notyf({\r\n                    duration: 2000,\r\n                  position: {\r\n                    x: 'center',\r\n                    y: 'top',\r\n                  }\r\n                  });\r\n                notyf.success('Product deleted with success');\r\n              let newFood = [...allFood]\r\n              \r\n              newFood.splice(i, 1)\r\n              setAllFood(newFood)\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            console.log(err)\r\n        })\r\n       }\r\n\r\n       \r\n\r\n\r\n       if(loading === false){\r\n           return <LoadingSpinner />\r\n       }\r\n  return (\r\n      <div>\r\n          <SideBar />\r\n          <button className=\"add-product\" onClick={() => setShow(true)}>Add product</button>\r\n          <div className=\"all-food\">\r\n\r\n              <table>\r\n                  <tr>\r\n                      <th>Name</th>\r\n                      <th>Description</th>\r\n                      <th>Price</th>\r\n                      <th>Category</th>\r\n                      <th>Image</th>\r\n                      <th>Action</th>\r\n                  </tr>\r\n                  {allFood.map((food, i) => {\r\n                      return <tr key={i}>\r\n                          \r\n                          <td>{food.name}</td>\r\n                          <td>{food.description}</td>\r\n                          <td>${food.price}</td>\r\n                          <td>{food.category.name}</td>\r\n                          <td>Image</td>\r\n                          <td><img src={process.env.PUBLIC_URL + \"/images/pencil.png\"} alt=\"edit\" height=\"35\" width=\"35\" onClick={() => {setShowEdit(true); setSingleFood(food)}}/> <img src={process.env.PUBLIC_URL + \"/images/remove.png\"} alt=\"remove\" height=\"35\" width=\"35\" onClick={() => handleDelete(food._id, i)} /></td>\r\n                         \r\n                      </tr>\r\n                      \r\n                  })}\r\n\r\n\r\n              </table>\r\n          </div>\r\n          <AddProductModal categories={categories} show={show} onClose={() => setShow(false)} allFood={allFood} setAllFood={setAllFood} />\r\n          <ModalEditFood showEdit={showEdit} onClose={() => setShowEdit(false)} categories={categories} singleFood={singleFood} setSingleFood={setSingleFood}/>\r\n      </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}