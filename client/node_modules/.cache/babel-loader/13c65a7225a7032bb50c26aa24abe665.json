{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bilal\\\\Documents\\\\food-delivery-app\\\\client\\\\src\\\\components\\\\protectedRoute\\\\AdminProtectedRoutes.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminProtectedRoutes = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [isAuth, setIsAuth] = useState(true);\n  useEffect(() => {\n    async function getAuthAdmin() {\n      try {\n        const res = await fetch('http://localhost:3000/jwtid/admin', {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include'\n        });\n        const data = await res.json();\n        console.log(data);\n\n        if (data.user._id && data.user.isAdmin === true) {\n          setIsAuth(true);\n          console.log(data);\n          localStorage.setItem(\"userId\", data.user._id);\n        } else {\n          setIsAuth(false);\n          localStorage.removeItem(\"userId\");\n          localStorage.removeItem(\"userInfo\");\n          console.log(data);\n        }\n      } catch (err) {\n        setIsAuth(false);\n        localStorage.removeItem(\"userId\");\n        localStorage.removeItem(\"userInfo\");\n        console.log(err);\n      }\n    }\n\n    console.log(isAuth);\n    getAuthAdmin();\n  }, []);\n  return isAuth ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 30\n  }, this);\n};\n\n_s(AdminProtectedRoutes, \"/i/wAOlltoEkdfK2JDLmZnpCTDE=\");\n\n_c = AdminProtectedRoutes;\nexport default AdminProtectedRoutes;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminProtectedRoutes\");","map":{"version":3,"sources":["C:/Users/bilal/Documents/food-delivery-app/client/src/components/protectedRoute/AdminProtectedRoutes.js"],"names":["useEffect","useState","Navigate","AdminProtectedRoutes","children","isAuth","setIsAuth","getAuthAdmin","res","fetch","headers","credentials","data","json","console","log","user","_id","isAdmin","localStorage","setItem","removeItem","err"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,kBAAzB;;;AAGA,MAAMC,oBAAoB,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AAE3C,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBL,QAAQ,CAAC,IAAD,CAApC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeO,YAAf,GAA8B;AAC1B,UAAI;AAEA,cAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,mCAAD,EAAsC;AACzDC,UAAAA,OAAO,EAAE;AACL,4BAAgB;AADX,WADgD;AAIzDC,UAAAA,WAAW,EAAE;AAJ4C,SAAtC,CAAvB;AAMA,cAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAAnB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AACA,YAAIA,IAAI,CAACI,IAAL,CAAUC,GAAV,IAAiBL,IAAI,CAACI,IAAL,CAAUE,OAAV,KAAoB,IAAzC,EAA+C;AAC3CZ,UAAAA,SAAS,CAAC,IAAD,CAAT;AACAQ,UAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAO,UAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BR,IAAI,CAACI,IAAL,CAAUC,GAAzC;AAEH,SALD,MAKM;AACFX,UAAAA,SAAS,CAAC,KAAD,CAAT;AACAa,UAAAA,YAAY,CAACE,UAAb,CAAwB,QAAxB;AACAF,UAAAA,YAAY,CAACE,UAAb,CAAwB,UAAxB;AACAP,UAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACH;AACJ,OArBD,CAqBC,OAAMU,GAAN,EAAU;AACPhB,QAAAA,SAAS,CAAC,KAAD,CAAT;AACAa,QAAAA,YAAY,CAACE,UAAb,CAAwB,QAAxB;AACIF,QAAAA,YAAY,CAACE,UAAb,CAAwB,UAAxB;AACJP,QAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACH;AAEJ;;AACDR,IAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AAEAE,IAAAA,YAAY;AACb,GAlCQ,EAkCN,EAlCM,CAAT;AAoCA,SAAOF,MAAM,GAAGD,QAAH,gBAAc,QAAC,QAAD;AAAU,IAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,UAA3B;AAED,CA1CD;;GAAMD,oB;;KAAAA,oB;AA4CN,eAAeA,oBAAf","sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { Navigate } from \"react-router-dom\"\r\n\r\n\r\nconst AdminProtectedRoutes = ({children}) => {\r\n\r\n  const [isAuth, setIsAuth] = useState(true)\r\n\r\n  useEffect(() => {\r\n    async function getAuthAdmin() {\r\n        try {\r\n\r\n            const res = await fetch('http://localhost:3000/jwtid/admin', {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                credentials: 'include'\r\n            })\r\n            const data = await res.json()\r\n            console.log(data)\r\n            if (data.user._id && data.user.isAdmin===true) {\r\n                setIsAuth(true)\r\n                console.log(data)\r\n                localStorage.setItem(\"userId\", data.user._id )\r\n                \r\n            }else {\r\n                setIsAuth(false)\r\n                localStorage.removeItem(\"userId\")\r\n                localStorage.removeItem(\"userInfo\")\r\n                console.log(data)\r\n            }\r\n        }catch(err){\r\n            setIsAuth(false)\r\n            localStorage.removeItem(\"userId\")\r\n                localStorage.removeItem(\"userInfo\")\r\n            console.log(err)\r\n        }\r\n    \r\n    }\r\n    console.log(isAuth)\r\n\r\n    getAuthAdmin()\r\n  }, [])\r\n\r\n  return isAuth ? children : <Navigate to='/login' />\r\n\r\n}\r\n\r\nexport default AdminProtectedRoutes"]},"metadata":{},"sourceType":"module"}