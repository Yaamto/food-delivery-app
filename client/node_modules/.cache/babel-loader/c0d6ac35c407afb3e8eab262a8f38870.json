{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/bilal/Documents/food-delivery-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\bilal\\\\Documents\\\\food-delivery-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from\"react\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var AdminProtectedRoutes=function AdminProtectedRoutes(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isAuth=_useState2[0],setIsAuth=_useState2[1];useEffect(function(){function getAuthAdmin(){return _getAuthAdmin.apply(this,arguments);}function _getAuthAdmin(){_getAuthAdmin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"jwtid/admin\"),{headers:{'Content-Type':'application/json'},credentials:'include'});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;console.log(data);if(data.user._id&&data.user.isAdmin===true){setIsAuth(true);console.log(data);localStorage.setItem(\"userId\",data.user._id);}else{setIsAuth(false);localStorage.removeItem(\"userId\");localStorage.removeItem(\"userInfo\");console.log(data);}_context.next=17;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setIsAuth(false);localStorage.removeItem(\"userId\");localStorage.removeItem(\"userInfo\");console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _getAuthAdmin.apply(this,arguments);}console.log(isAuth);getAuthAdmin();},[]);return isAuth?children:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});};export default AdminProtectedRoutes;","map":{"version":3,"sources":["C:/Users/bilal/Documents/food-delivery-app/client/src/components/protectedRoute/AdminProtectedRoutes.js"],"names":["useEffect","useState","Navigate","AdminProtectedRoutes","children","isAuth","setIsAuth","getAuthAdmin","fetch","process","env","REACT_APP_API_URL","headers","credentials","res","json","data","console","log","user","_id","isAdmin","localStorage","setItem","removeItem"],"mappings":"kaAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,2CAGA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAE3C,cAA4BH,QAAQ,CAAC,IAAD,CAApC,wCAAOI,MAAP,eAAeC,SAAf,eAEAN,SAAS,CAAC,UAAM,SACCO,CAAAA,YADD,8IACd,sLAG0BC,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,gBAAgD,CACnEC,OAAO,CAAE,CACL,eAAgB,kBADX,CAD0D,CAInEC,WAAW,CAAE,SAJsD,CAAhD,CAH/B,QAGcC,GAHd,qCAS2BA,CAAAA,GAAG,CAACC,IAAJ,EAT3B,QAScC,IATd,eAUQC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAIA,IAAI,CAACG,IAAL,CAAUC,GAAV,EAAiBJ,IAAI,CAACG,IAAL,CAAUE,OAAV,GAAoB,IAAzC,CAA+C,CAC3Cf,SAAS,CAAC,IAAD,CAAT,CACAW,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAM,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+BP,IAAI,CAACG,IAAL,CAAUC,GAAzC,EACH,CAJD,IAIM,CACFd,SAAS,CAAC,KAAD,CAAT,CACAgB,YAAY,CAACE,UAAb,CAAwB,QAAxB,EACAF,YAAY,CAACE,UAAb,CAAwB,UAAxB,EACAP,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACH,CApBT,iFAsBQV,SAAS,CAAC,KAAD,CAAT,CACAgB,YAAY,CAACE,UAAb,CAAwB,QAAxB,EACIF,YAAY,CAACE,UAAb,CAAwB,UAAxB,EACJP,OAAO,CAACC,GAAR,cAzBR,qEADc,+CA8BdD,OAAO,CAACC,GAAR,CAAYb,MAAZ,EAEAE,YAAY,GACb,CAjCQ,CAiCN,EAjCM,CAAT,CAmCA,MAAOF,CAAAA,MAAM,CAAGD,QAAH,cAAc,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAA3B,CAED,CAzCD,CA2CA,cAAeD,CAAAA,oBAAf","sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { Navigate } from \"react-router-dom\"\r\n\r\n\r\nconst AdminProtectedRoutes = ({children}) => {\r\n\r\n  const [isAuth, setIsAuth] = useState(true)\r\n\r\n  useEffect(() => {\r\n    async function getAuthAdmin() {\r\n        try {\r\n\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}jwtid/admin`, {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                credentials: 'include'\r\n            })\r\n            const data = await res.json()\r\n            console.log(data)\r\n            if (data.user._id && data.user.isAdmin===true) {\r\n                setIsAuth(true)\r\n                console.log(data)\r\n                localStorage.setItem(\"userId\", data.user._id )\r\n            }else {\r\n                setIsAuth(false)\r\n                localStorage.removeItem(\"userId\")\r\n                localStorage.removeItem(\"userInfo\")\r\n                console.log(data)\r\n            }\r\n        }catch(err){\r\n            setIsAuth(false)\r\n            localStorage.removeItem(\"userId\")\r\n                localStorage.removeItem(\"userInfo\")\r\n            console.log(err)\r\n        }\r\n    \r\n    }\r\n    console.log(isAuth)\r\n\r\n    getAuthAdmin()\r\n  }, [])\r\n\r\n  return isAuth ? children : <Navigate to='/login' />\r\n\r\n}\r\n\r\nexport default AdminProtectedRoutes"]},"metadata":{},"sourceType":"module"}